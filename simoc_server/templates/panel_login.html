{% extends "base_home.html" %}

{% block panel %}
<div class="text-center SF_lg_Window">
    <div class="pt-5 center">
        <form class="logform" >
            <div class="form-group ">               
                <input type="text" name="username" class="form-control " id="username" placeholder="Enter username">
               
            </div>
            <div class="form-group ">               
                <input type="password" name="password" class="form-control " id="password" placeholder="Password">
            </div>
            <span id="msg" class="form-text " ></span>             
            <button type="button" id="submitbtn" class="btn btn-primary">Login</button>
            <button type="button" id="menuoptionbackbtn" class="btn btn-primary">Back</button>
        </form>
    </div>

</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script type="text/javascript">
    $(function () {
        $('#menuoptionbackbtn').click(function () {
            gotourl('/');
        });
        function isEmpty(str) {
            return (!str || 0 === str.length);
        }
        $('#submitbtn').click(function () {
            

           // alert($('form').());
            var user = $('#username').val();
            var pass = $('#password').val();
            var obj = { "username": user, "password": pass };
            if (isEmpty(user) || isEmpty(pass)) {
                $('#msg').html('Enter username or password!');
            }
            alert(JSON.stringify(obj));
            $.post($SCRIPT_ROOT + '/login', JSON.stringify(obj), function (data,status) {
                alert(JSON.stringify(data+'status:'+status));
                if (status == 'success') {
                    gotourl('/gameinit');
                }
                else {
                    $('#msg').html('Login failed! Try again');
                }
                
                //$("#result").text(data.result);
            },"json");
            return false;
        });
        });
    
   
</script>
{% endblock %}
